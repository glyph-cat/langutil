/**
 * @author chin98edwin
 * @copyright Copyright (c) 2018 - 2019, chin98edwin
 * @description Localization for JavaScript made simple.
 * @version 2.4.0
**/
let C1="en",C2={},C3=false,C4=false,C5={onLangChangeSubscribers:{}},C6=0;
module.exports={init:f1,setLanguage:f2,localize:f3,localizeWith:f4,createKey:(k,l)=>({keyword:k,localizations:l}),getLanguage:()=>C1,getDefinedLanguages:()=>f6(C2).allLanguages,isAuto:()=>C4,logs:{focus:f5,snoozeInspectionUntil:()=>{},hide:()=>{},show:()=>{}},internalHook:{subscribeToOnLangChange:c=>{const newlangutilId=`component${C6++}`;function hook(hookedCallback){C5["onLangChangeSubscribers"][newlangutilId]=hookedCallback}c(newlangutilId,hook)},unsubscribeToOnLangChange:e=>{delete C5["onLangChangeSubscribers"][e]}}};function f1(d,l,a){if(Array.isArray(d)){C3=false;let f={};for(let i=0;i<d.length;i++){const c=d[i];f[c.keyword]=c.localizations}f10(f)}else{C3=true;f10(d)}f2(l,a)}function f2(l,a){if(a){let u=l;C4=true;if(a===true){try{const n=navigator.language||navigator.userLanguage;u=n.toLowerCase()}catch(e){}}else if(typeof a==="function"){try{u=a()}catch(e){}}const f=typeof u==="string";if(f){let d=u;try{d=d.toLowerCase()}catch(e){}let al=f6(C2).allLanguages;for(let i=0;i<al.length;i++){try{al[i]=al[i].toLowerCase()}catch(e){}}if(!al.includes(u)){u=u.substr(0,2);if(al.includes(u)){u=l}}}else{u=l}C1=u}else{C1=l}const s=Object.keys(C5["onLangChangeSubscribers"]);for(let i=0;i<s.length;i++){const c=C5["onLangChangeSubscribers"][s[i]];c()}}function f3(k,p=[],a){let localizeSuccess=false,localizedValue=k;if(k){if(typeof k!=="string"){return `_${k}_`}}else{if(a){return ""}else{return `_${k}_`}}try{localizedValue=localizedValue.toUpperCase();if(C3){localizedValue=C2[C1][k]}else{localizedValue=C2[k][C1]}if(typeof localizedValue==="string"){localizedValue=f9(localizedValue,p)}localizeSuccess=localizedValue!==undefined}catch(e){}return localizeSuccess?localizedValue:`_${k}_`}function f4({keyword:k,paramArray:p=[],casing:c,transform:t,allowEmpty:a}){let l=f3(k,p,a);if(typeof l==="string"){if(typeof c==="string"){const f={lowercase:v=>v.toLowerCase(),localeLowercase:v=>v.toLocaleLowerCase(),uppercase:v=>v.toUpperCase(),localeUppercase:v=>v.toLocaleUpperCase(),sentenceCase:v=>f7(v),titleCase:v=>{v=v.split(/[\s]/g);for(let i=0;i<v.length;i++){v[i]=f7(v[i])}v=v.join(" ");return v}};const s=f[c];if(s){try{l=s(l)}catch(e){}}}}if(typeof t==="function"){l=t(l)}return l}function f5(c){const t=typeof c;let s=false;if(t==="function"){try{c();s=true}catch(e){}}return s}function f6(d){let l=[],k=[];if(C3){l=Object.keys(d);for(let i=0;i<l.length;i++){const x=d[l[i]];k.push(...Object.keys(x))}k=[...new Set(k)]}else{k=Object.keys(d);for(i=0;i<k.length;i++){const y=d[k[i]];l.push(...Object.keys(y))}l=[...new Set(l)]}return{allLanguages:l,allKeywords:k}}function f7(v){v=v.toLowerCase();const c=v.split("");const f=c.shift();return `${f.toUpperCase()}${c.join("")}`}function f8(p,l){let n="";do{let r=Math.floor(Math.random()*p.length);n+=p[r]}while(n.length<l);return n}function f9(s,p=[]){let escape_p_Length=2,w="%q";while(s.includes(w)){try{w=f8("0123456789abcdef",escape_p_Length++)}catch(e){}}s=s.replace(/(%%p)/g,w);let h=s.match(/(%p)/g);h=h?h:[];let c=Math.min((h.length+1),p.length);for(let i=0;i<c;i++){s=s.replace(/(%p)/,p[i])}s=s.replace(/(%p)/g,"");s=s.replace(new RegExp("("+w+")","g"),"%p");return s}function f10(d){C2=d}